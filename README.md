# Currently Viewing App
### Implements the exercise in https://github.com/QulinaryOrg/currently-viewing-app

## Usage

### Pre-requisites:
Make sure you have installed (in your path):
  * nodejs (v4.3.2)  
  * npm (3.10.9)
  
### Run this by:
1. `cd` to the the root directory of this project (where this README.md file is)
2. `npm install` to install any missing package
3. Then start the server by `node src/server/app.js`  (or `node src/server/app.js --port PORT`)
4. Finally, open your browser in the selected ip/port (default is 3000). 

As you connect from different IPs, you will see the list of currently connected IPs listed there.
If you connect from same IP several times simultaneously, the IP is shown only once.

## Architecture
### What not, and why.
The app is simple enough, and I did not want to use some tools that seems to be over-kill for this project.

I thought about using meteorJS, as it provides BE and FE realtime (reactive) communication, but seemed overkill. Meteor
even starts a mongoDB sever for you, to store the data. But in this project there is no data to store: if the server 
goes down, the clients will need to connect again (else we will show inaccurate info) 

I also evaluated to use AngularJS (or React or similar). But the task had no user interaction (other than connecting), 
so using some 3 way-binding library/framework seemed overkilling too.

### What yes
Finally I decided to use:
* For the back-end: Node js.
  * I use Express to serve the HTML (and JS) static files
  * socket.io to count the connections from the clients.


* For the front-end:
  * Handlebars to use a simple template system that gets the data updated as the number of connections changes
  * socket.io to connect the client to the server, and to get instant messages from the server when a new client 
dis/connects
  * Bootstrap for a very simple look & feel


* For development
  * Grunt with several plugins to build and make easier some repetitive tasks.


### Files/Directories
```
src
|____client 
| |____client.js
| |____index.html
| |____templates
| | |____ipListTemplate.hbs
| |____templates.js
|____server
| |____app.js
| |____connections.js
| |____staticServer.js
```

Server related files are under the src/server directory.
* app.js is the main entry point for the app. It parses the command line and starts the http and socket.io servers
* connection.js is the socket.io server. It has the logic for counting the dis/connections and brodcast that info to every client.
* staticServer.js Uses express to serve the client files

Client related files are under the src/client directory
* index.html is the main (and only) html fil
* templates/*.hbs has all the handlebars templates (are html files to be compiled into templates.js)
* templates.js is generated by (Grunt using) handlebars from the files in templates/*.hbs. There is no real need to 
commit this to the repository, as it's created automatically. I decided however to commit this for completeness.
* client.js has the logic for this app: it connects to the socket.io server, and receives a message every time there is
a dis/connect. It then updates the html (using the handlebars template) to show that info to the user.

---
Enjoy, Rafa
